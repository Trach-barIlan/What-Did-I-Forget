{
    "sourceFile": "backend/routes/destinations.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1743776261707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1743968436831,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,5 +27,6 @@\n     res.status(400).json({ message: err.message });\n   }\n });\n \n+\n module.exports = router;\n"
                },
                {
                    "date": 1743968448988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,23 +11,9 @@\n     res.status(500).json({ message: err.message });\n   }\n });\n \n-// Add a new destination\n-router.post('/', async (req, res) => {\n-  const { name, details } = req.body;\n-  const destination = new Destination({\n-    name,\n-    details,\n-  });\n \n-  try {\n-    const newDestination = await destination.save();\n-    res.status(201).json(newDestination);\n-  } catch (err) {\n-    res.status(400).json({ message: err.message });\n-  }\n-});\n \n router.post('/api/destinations', async (req, res) => {\n     try {\n       // Find the highest intId in the collection\n"
                },
                {
                    "date": 1744003551782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,34 @@\n+const express = require('express');\n+const Destination = require('../models/Destination');\n+const router = express.Router();\n+\n+// Get all destinations\n+router.get('/', async (req, res) => {\n+  try {\n+    const destinations = await Destination.find();\n+    res.json(destinations);\n+  } catch (err) {\n+    res.status(500).json({ message: err.message });\n+  }\n+});\n+\n+\n+router.post('/', async (req, res) => {\n+    try {\n+      // Find the highest intId in the collection\n+      const highestDestination = await Destination.findOne().sort('-intId');\n+      const nextIntId = (highestDestination?.intId || 0) + 1;\n+  \n+      const destination = new Destination({\n+        ...req.body,\n+        intId: nextIntId\n+      });\n+      \n+      const savedDestination = await destination.save();\n+      res.status(201).json(savedDestination);\n+    } catch (error) {\n+      res.status(400).json({ message: error.message });\n+    }\n+  });\n+\n+module.exports = router;\n"
                }
            ],
            "date": 1743776261707,
            "name": "Commit-0",
            "content": "const express = require('express');\nconst Destination = require('../models/Destination');\nconst router = express.Router();\n\n// Get all destinations\nrouter.get('/', async (req, res) => {\n  try {\n    const destinations = await Destination.find();\n    res.json(destinations);\n  } catch (err) {\n    res.status(500).json({ message: err.message });\n  }\n});\n\n// Add a new destination\nrouter.post('/', async (req, res) => {\n  const { name, details } = req.body;\n  const destination = new Destination({\n    name,\n    details,\n  });\n\n  try {\n    const newDestination = await destination.save();\n    res.status(201).json(newDestination);\n  } catch (err) {\n    res.status(400).json({ message: err.message });\n  }\n});\n\nmodule.exports = router;\n"
        }
    ]
}